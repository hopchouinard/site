---
import BaseLayout from '../layouts/BaseLayout.astro';
import DashboardCard from '../components/DashboardCard.astro';
import { getCollection } from 'astro:content';

const allDashboards = await getCollection('dashboards');
const sortedDashboards = allDashboards.sort((a, b) => b.data.date.localeCompare(a.data.date));
---

<BaseLayout title="NeuroHelix - AI Intelligence Dashboards">
  <div class="mb-12">
    <h1 class="text-4xl font-bold text-neutral mb-4">
      AI Intelligence <span class="text-primary">Dashboards</span>
    </h1>
    <p class="text-neutral-dark text-lg">
      Automated daily synthesis of AI research, market trends, and strategic insights.
    </p>
  </div>

  {sortedDashboards.length === 0 ? (
    <div class="text-center py-16">
      <p class="text-neutral-dark text-lg">No dashboards available yet. Run the pipeline to generate your first dashboard!</p>
    </div>
  ) : (
    <div class="grid grid-cols-1 gap-6">
      {sortedDashboards.map((dashboard) => (
        <DashboardCard
          date={dashboard.data.date}
          title={dashboard.data.title}
          summary={dashboard.data.summary}
          tags={dashboard.data.tags}
          domains_count={dashboard.data.domains_count}
          permalink={dashboard.data.permalink}
        />
      ))}
    </div>
  )}
</BaseLayout>
